OpenEmbedded/Yocto Distribution layer for Mentor Graphics
=========================================================

This layer holds the Mentor Embedded Linux distro configuration and
supplementary files, and acts as a staging area for changes which Mentor
Graphics requires, but which have not yet been merged into the upstream
layers.

This layer depends on:

URI: git://git.openembedded.org/openembedded-core
Branch: master

URI: git://git.yoctoproject.org/meta-yocto
Revision: master


Contributing
------------

Browse url: http://git.yoctoproject.org/cgit/cgit.cgi/meta-mentor
Clone url: git://git.yoctoproject.org/meta-mentor.git

To contribute to this layer you should submit the patches for review to the
mailing list.

Mailing list: meta-mentor@yoctoproject.org

When sending single patches, please use something like
'git send-email -1 --to meta-mentor@yoctoproject.org'

When sending a series, please use poky/meta/scripts/create-pull-request (aka
oe-core/scripts/create-pull-request).

Content Review
--------------

Distro bits
===========

    - base-files: issue files
    - netbase: adjusted default interfaces file
    - psplash: mel splash image
    - core-image-base: added package-management
    - e2fsprogs: killed e2fsprogs compat dep on blkid/badblocks
    - mel-release: used to archive up content for release
    - nfs-utils and packagegroup-core-nfs: prefer rpcbind, not portmap
    - other packagegroups

    - cml1-merge class: old crude implementation of defconfig file snippets,
      ala *.cfg in kernel-yocto, but also useful in regular kernels, since
      the kernel-yocto bits aren't generally useful (yet)
    - user_features class: easier user manipulation of DISTRO_FEATURES from
      local.conf
    - buildstats-summary class: using buildstats, show a summary at the end
      of the build showing how many recipes ran do_populate_sysroot vs
      do_populate_sysroot_setscene
    - deploy-license-manifest class: this is fairly self explanatory. it deploys
      the manifest generated by license.bbclass into DEPLOY_DIR via an
      IMAGE_POSTPROCESS_COMMAND, and also runs a sed script which produces a
      CSV version of the manifest in DEPLOY_DIR also
    - kernel-lttng - automatically enable the kernel options needed to support
      lttng in any non-linux-yocto kernel
    - mirrors class: a much simplified, compact version of the upstream
      default mirrors, without location-specific mirrors, and with more use of
      regex to reduce the number of entries
    - sstate-reuse class: this should be renamed, but it provides a
      convenient mechanism to automatically check sstate mirrors in both the
      default sstate extra path, as well as specified fallback hosts for
      native recipes, and finally falls back to a flat layout. this means that
      a mirror can be populated with native sstate archives in a
      RedHatEnterprise-5 directory, and knowing we can run binaries from that
      host, it will check there on the mirror. Example:

          SSTATE_MIRROR_DISTROS += "RedHatEnterprise-5"
          SSTATE_MIRROR_SITES += "file:///cache/sstate http://my.server/sstate-cache"

    - isolated-sstate-dir class: link any used shared state archives into an
      isolated sstate directory, so we can distinguish between the contents of
      SSTATE_DIR and the sstate archives actually used for the build. This is
      needed by our release process.
    - package_early_expand class: work around self referential variable bug
      with SUMMARY and DESCRIPTION. Multiple packaging classes add a package
      name override, then getVar('SUMMARY', True). Yet the default values of
      SUMMARY_${PN}-dbg and friends refer to '${SUMMARY}'. So first
      SUMMARY_${PN}-dbg replaces SUMMARY, then SUMMARY is referring to itself.
      This class forces early expansion of the SUMMARY and DESCRIPTION
      variables to work around the issue. A proper fix would likely be to stop
      using package name OVERRIDES in the packaging classes.

Added recipes
=============

    - archive-release: this creates tarballs of the individual layers,
      downloads, shared state, images, etc for release or for inclusion in
      installers. this is used for Mentor Embedded Linux.
    - chkconfig-alternatives - minimal target recipe, can be useful in
      a non-rpm environment if one wants to avoid cworth's update-alternatives
    - binutils 2.17.50.0.12: originally from oe classic, pulled in for
      non-GPLv3 builds, so tools like oprofile and perf can be built and used
    - lttng{0-ust,-control,-viewer}: recipes for lttng 0.x, for machines with
      old lttng 0.x patched kernels
    - packagegroup-tools-benchmark: various benchmarking tools
    - packagegroup-role-nas
    - packagegroup-role-print-server
    - packagegroup-role-router
    - pyparted: this is currently unused by us, should be pushed to meta-oe
    - udev 164: old udev for machines on old kernels


Changes pending upstream push
=============================

    - classes
        - license-fixup.bbclass - this should go into license.bbclass. alters
          the manifest generation to always emit the licenses, even if they
          have no generic license files in DEPLOY_DIR/license
        - package.bbclass
            - makes license exclusion a note rather than a warning, as it's
              doing what the configuration told it to do, not deviating from
              it, which makes it appropriate for debug logs, but not for
              warnings on the console
            - ensures that license excluded files don't get accidentally
              packaged. this fix is on upstream master, but should get pulled
              into dylan also
        - package_early_expand.bbclass - this shouldn't go upstream as is, but
          this fix does need to go upstream in some form
    - avahi-ui:
        - use PACKAGECONFIG for python module support, inherit python classes.
          without these bits, it will happy mess with the build machine's
          python
        - package avahi_discover in PYTHON_SITEPACKAGES_DIR
    - connman - add PACKAGECONFIG to control WISPr support. enabling wispr
      support requires TLS, so this helps if one wants to reduce dependency on
      gnutls, or if one just doesn't care about WISPr
    - curl: allow selection of openssl vs gnutls
    - gconf: inherit gettext
    - gnome-disk-utility
        - add PACKAGECONFIG for the build of the nautilus extension
    - gnutls: update ${S}/lib/po/Makefile.in.in
    - linux-omap4
        - disable build of kernel samples for pandaboard
    - newt - splits out python module into a separate recipe. allows one to
      include libnewt in an image without sucking python into the build
    - packagegroup-base: include dosfstools in packagegroup-base-vfat
    - packagegroup-core-qt: define `LIC_FILES_CHKSUM` for MIT
    - packagegroup-core-ssh-openssh: define `LIC_FILES_CHKSUM` for MIT
    - packagegroup-core-tools-profile:
        - fix inclusion of lttng bits for mips, now that liburcu has mips
          support
        - include lttng 0.x packages for machines on old kernels which are
          patched for lttng 0.x
    - perf
    - portmap:
        - obey PACKAGECONFIG for tcp wrappers support
        - obey our target paths (base_sbindir, mandir)
    - quota: obey PACKAGECONFIG for tcp wrappers support
    - rpcbind: add PACKAGECONFIG for tcp wrappers support
    - samba
        - disable avahi support (build determinism issue)
        - without acl support (build determinism issue)
    - subversion: switch to apache archive to avoid fetch issues
    - wireless-tools
    - wpa-supplicant: add variable to select gnutls vs openssl
    - xz: adjusts license so it's clear GPLv3 files aren't shipped. upstream
      fixed this too, in a different way, but I think ours is superior, as it
      lets LICENSE reflect source licensing while the package licenses reflect
      what's shipped

Fix GNU_HASH warnings / obey LDFLAGS
====================================

These should either go upstream, *if* they care, otherwise they should go to
meta-sourcery. Upstream doesn't see the GNU_HASH warnings, as internally built
toolchains default to the right gnu hash bits, but arguably these are still
bugs, as software builds should obey metadata variables like LDFLAGS.

    - imx-lib
    - blktrace
    - hostap
    - gdbm
    - setserial
    - irda-utils
    - python
    - perl

Tracing
=======

All of these should be moved into meta-tracing:

    - linux-imx
    - linux-qoriq-sdk
    - linux-omap4
    - lttng-modules: a couple fixes, switch from 2.1.1 to 2.1.0 with
      intermediate commits from the master branch which incorporates
      additional probes

DSO Link Change
===============

    - shared-mime-info

Disabled parallel make / install
================================

    - gettext
    - libtool
    - lttng2-ust
    - openssh

Remanant PRINC bumps
====================

These can be dropped as soon as the recipe PV is bumped, but are kept around
for now to avoid the package versions going backwards.

    - netbase
    - packagegroup-core-device-devel
    - wireless-tools

Misc
====

    - busybox: dep on meta-oe's fbset-modes if CONFIG_FBSET=y
    - binutils-libs, oprofile: add and use more minimal binutils recipe for
      oprofile. This recipe just builds libbfd and libiberty
    - libffi: patches for mips o32/n32
    - boot-format: use a different repo with additional files
    - udev: retained 164 recipe for machines that still need it
